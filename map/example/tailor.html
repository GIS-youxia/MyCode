<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>史廷春Demo</title>
        <style>
            * {
                padding: 0;
                margin: 0;
            }
            html,
            body,
            #app {
                position: relative;
                height: 100%;
            }
        </style>
        <link rel="stylesheet" href="../CesiumUnminified/Widgets/Widgets.css" />
        <script type="text/javascript" src="./dataGui.js"></script>
        <script src="../CesiumUnminified/Cesium.js"></script>
        <script src="/kvscene.js"></script>
    </head>
    <body>
        <div id="app"></div>
        <img src="../static_stc/img/loading.svg" alt="" id="stcsvg">
        <script>

            window.onload = () => {
                if (!window.kvscene) {
                    return;
                }

                // const CesiumIonDefaultToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzNjgwYzc1ZS0wNmVjLTRhYWItYmUyMy0yNDM2YWFjOTE1ZjciLCJpZCI6MzQ0NjEsImlhdCI6MTYwMDMzMDg3NH0.7QJwJRUkzLdkDU5B7TiZ-7Ib3quVbpuDDxqy0s9Wxi4";
                // Cesium.Ion.defaultAccessToken = CesiumIonDefaultToken;
                const kvmapInstance = new kvscene.KVScene3D({
                    el: "app"
                });
                window.kvmapInstance = kvmapInstance;
    
                

                // kvmapInstance.viewer.terrainProvider = new Cesium.CesiumTerrainProvider({
                //     url: "http://10.67.0.133:8000/dem/",
                // });

                // kvmapInstance.sceneControl.terrainClip({
                //     area: "http://10.67.0.56:9091/static/geojson/szxzbj.geojson",
                // });
                
                
                // let layer = kvmapInstance.layerManager.addLayer("stc", "Tailor", {
                //     style: {
                //     }
                // });
                // layer.setData("http://10.67.0.56:9091/static/geojson/szxzbj.json");

                // kvmapInstance.viewer.imageryLayers.removeAll();

                const googleProvider = new Cesium.UrlTemplateImageryProvider({
                        // url : "https://10.67.24.180:8001/%E8%8B%8F%E5%B7%9E%E5%9C%B0%E5%9B%BE%E5%8E%9F%E8%AF%9D%E9%A3%8E/%E8%8B%8F%E5%B7%9E%E5%B8%82%E5%8E%9F%E5%A7%8B%E9%A3%8E/%E8%8B%8F%E5%B7%9E%E5%B8%82%E5%8E%9F%E5%A7%8B%E9%A3%8E%E5%A2%A8%E5%8D%A1%E6%89%98%E5%8E%9F%E5%A7%8B%E7%93%A6%E7%89%87/{z}/{x}/{y}.png",
                        // url: "http://10.67.24.180:8000/{z}/{x}/{y}.png",
                        url: "https://10.68.8.117:9043/kmap-server/gridMap/tile/{z}/{y}/{x}",
                        maximumLevel: 18,
                        hasAlphaChannel: false,
                });
                kvmapInstance.viewer.imageryLayers.addImageryProvider(googleProvider);



                var layer = kvmapInstance.sceneControl.terrainClip({
                    area: "http://10.67.0.56:9091/static_stc/json/zjj.json",
                    precision: 2048
                    // area: "http://10.67.0.56:9091/static_stc/json/szszsz.geojson"
                });

                // const googleProvider = new Cesium.UrlTemplateImageryProvider({
                //     url : "https://10.67.24.180:8001/%E8%8B%8F%E5%B7%9E%E5%9C%B0%E5%9B%BE%E5%8E%9F%E8%AF%9D%E9%A3%8E/%E8%8B%8F%E5%B7%9E%E5%B8%82%E5%8E%9F%E5%A7%8B%E9%A3%8E/%E8%8B%8F%E5%B7%9E%E5%B8%82%E5%8E%9F%E5%A7%8B%E9%A3%8E%E5%A2%A8%E5%8D%A1%E6%89%98%E5%8E%9F%E5%A7%8B%E7%93%A6%E7%89%87/{z}/{x}/{y}.png",
                //     maximumLevel: 18,
                //     hasAlphaChannel: false,
                // });
                // kvmapInstance.viewer.imageryLayers.addImageryProvider(googleProvider);
                               
                

                window.layer = layer;

                setTimeout(function(){
                    layer.located();
                },2000);
            };
        </script>
    </body>
</html>
